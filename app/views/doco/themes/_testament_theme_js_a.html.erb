...
function addToCart(e){
    if (typeof e !== 'undefined') e.preventDefault();

    var form      = $(this).parents('form');

    $.ajax({
        type: 'POST',
        url: '/cart/add.js',
        async: false,
        data: form.serialize(),
        dataType: 'json',
        error: addToCartFail,
        success: addToCartSuccess,
        cache: false
    });
}
...